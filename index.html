<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Binary clock</title>
  </head>

  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      height: 100vh;
      height: 100svh;
      background-color: #151510;
      font-family: sans-serif;
    }

    .container {
      position: relative;
      height: 23rem;
      width: 20rem;
      background-color: inherit;
      transform: scaleX(-1);
    }

    .inner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
      height: calc(92% - 1rem);
      width: calc(96% - 1rem);
      background-color: inherit;
      border-radius: 30%;
    }

    .digital {
      color: #dc143cee;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%) scaleX(-1) scaleY(2.7);
      font-size: 1.6rem;
      font-weight: 100;
    }
  </style>

  <body>
    <div class="container">
      <div class="hours inner">
        <div class="inner">
          <div class="minutes inner">
            <div class="inner">
              <div class="seconds inner">
                <div class="inner"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="digital"></div>
    </div>
  </body>

  <script>
    const getBinary = (number, length) => {
      let rs = number.toString(2);
      while (rs.length < length) {
        rs = '0' + rs;
      }
      return rs;
    };

    const generateConicGradient = (binary) => {
      let ddegs = 360 / binary.length - 4;
      let inner = 'transparent 0deg 2deg';
      let degs = 2;
      let index = 0;
      while (index < binary.length) {
        inner += `, ${binary[index] === '1' ? '#dc143cee' : '#333'} ${degs}deg ${
          degs + ddegs
        }deg`;
        degs += ddegs;
        inner += `, transparent ${degs}deg ${degs > 356 ? degs + 2 : degs + 4}deg`;
        degs += 4;
        index++;
      }

      return `conic-gradient(${inner})`;
    };

    const addZero = (number) => {
      if (number < 10) {
        return '0' + number;
      } else {
        return number;
      }
    };

    const updateClock = () => {
      const time = new Date();
      const hours = time.getHours();
      const minutes = time.getMinutes();
      const seconds = time.getSeconds();

      document.querySelector('.hours').style.backgroundImage =
        generateConicGradient(getBinary(hours, 5));
      document.querySelector('.minutes').style.backgroundImage =
        generateConicGradient(getBinary(minutes, 6));
      document.querySelector('.seconds').style.backgroundImage =
        generateConicGradient(getBinary(seconds, 6));

      document.querySelector('.digital').innerHTML = `${addZero(
        hours
      )}:${addZero(minutes)}:${addZero(seconds)}`;
    };

    updateClock();

    setInterval(updateClock, 100);
  </script>
</html>
